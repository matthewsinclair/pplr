#!/bin/bash
# Enhanced mock Claude for testing tags and search

input=$(cat)

# Check if this is a tag generation request
if echo "$input" | grep -qi "generate.*tags.*based.*content"; then
    # Tag generation response
    cat << 'RESPONSE'
{
  "profile_tags": ["test", "mock", "person"],
  "meeting_tags": ["test-meeting", "mock-meeting"],
  "generated_at": "2024-01-01T00:00:00Z",
  "version": "1.0"
}
RESPONSE
else
    # Search query handling
    query=$(echo "$input" | grep 'SEARCH QUERY:' | sed 's/.*SEARCH QUERY: "\(.*\)".*/\1/')
    
    # Simple mock responses based on query
    case "$query" in
        *"Anderson"*)
            cat << 'RESPONSE'
{
  "results": [
    {
      "name": "Anderson, James",
      "path": "A/Anderson, James",
      "role": "Test Role",
      "company": "Test Company",
      "relevance_score": 0.9,
      "explanation": "Name matches Anderson"
    }
  ],
  "total_matches": 1
}
RESPONSE
            ;;
        *)
            cat << 'RESPONSE'
{
  "results": [],
  "total_matches": 0
}
RESPONSE
            ;;
    esac
fi
